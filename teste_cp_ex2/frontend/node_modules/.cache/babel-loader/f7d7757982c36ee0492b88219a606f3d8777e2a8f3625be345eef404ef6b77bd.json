{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      vehicles: [],\n      customers: [],\n      currentVehicle: {\n        id: null,\n        plate: '',\n        model: '',\n        description: '',\n        customer: ''\n      },\n      editingVehicle: false,\n      errorMessage: null\n    };\n  },\n  mounted() {\n    this.fetchVehicles();\n    this.fetchCustomers();\n  },\n  methods: {\n    async fetchVehicles() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/v1/vehicles/');\n        this.vehicles = response.data;\n      } catch (error) {\n        console.error(error);\n        this.errorMessage = 'Erro ao buscar veículos.';\n      }\n    },\n    async fetchCustomers() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/v1/customers/');\n        this.customers = response.data;\n      } catch (error) {\n        console.error(error);\n        this.errorMessage = 'Erro ao buscar clientes.';\n      }\n    },\n    async saveVehicle() {\n      this.errorMessage = null;\n      try {\n        await axios.post('http://localhost:8000/api/v1/vehicles/', this.currentVehicle);\n        this.currentVehicle = {\n          id: null,\n          plate: '',\n          model: '',\n          description: '',\n          customer: ''\n        };\n        this.fetchVehicles();\n      } catch (error) {\n        console.error(error);\n        if (error.response && error.response.data && error.response.data.error) {\n          this.errorMessage = error.response.data.error;\n        } else {\n          this.errorMessage = 'Erro ao cadastrar veículo.';\n        }\n      }\n    },\n    editVehicle(vehicle) {\n      this.editingVehicle = true;\n      this.currentVehicle = {\n        ...vehicle\n      };\n    },\n    async updateVehicle() {\n      this.errorMessage = null;\n      try {\n        await axios.put(`http://localhost:8000/api/v1/vehicles/${this.currentVehicle.id}/`, this.currentVehicle);\n        this.editingVehicle = false;\n        this.currentVehicle = {\n          id: null,\n          plate: '',\n          model: '',\n          description: '',\n          customer: ''\n        };\n        this.fetchVehicles();\n      } catch (error) {\n        console.error(error);\n        if (error.response && error.response.data && error.response.data.error) {\n          this.errorMessage = error.response.data.error;\n        } else {\n          this.errorMessage = 'Erro ao atualizar veículo.';\n        }\n      }\n    },\n    async deleteVehicle(vehicleId) {\n      this.errorMessage = null;\n      try {\n        await axios.delete(`http://localhost:8000/api/v1/vehicles/${vehicleId}/`);\n        this.fetchVehicles();\n      } catch (error) {\n        console.error(error);\n        this.errorMessage = 'Erro ao excluir veículo.';\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","vehicles","customers","currentVehicle","id","plate","model","description","customer","editingVehicle","errorMessage","mounted","fetchVehicles","fetchCustomers","methods","response","get","error","console","saveVehicle","post","editVehicle","vehicle","updateVehicle","put","deleteVehicle","vehicleId","delete"],"sources":["C:\\Users\\Lucas\\Desktop\\teste_cp_ex2\\frontend\\src\\components\\Vehicle.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h1>Veículos</h1>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <h2>Cadastrar/Editar Veículo</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"plateInput\">Placa:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"plateInput\" v-model=\"currentVehicle.plate\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"modelInput\">Modelo:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"modelInput\" v-model=\"currentVehicle.model\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"descriptionInput\">Descrição:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"descriptionInput\" v-model=\"currentVehicle.description\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"customerIdSelect\">Cliente:</label>\r\n          <select class=\"form-control\" id=\"customerIdSelect\" v-model=\"currentVehicle.customer\">\r\n            <option value=\"\">Selecione um cliente</option>\r\n            <option v-for=\"customer in customers\" :key=\"customer.id\" :value=\"customer.id\">\r\n              {{ customer.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <button class=\"btn btn-primary\" @click=\"saveVehicle\" v-if=\"!editingVehicle\">\r\n          Cadastrar\r\n        </button>\r\n        <button class=\"btn btn-success\" @click=\"updateVehicle\" v-else>\r\n          Salvar Alterações\r\n        </button>\r\n        <div v-if=\"errorMessage\" class=\"alert alert-danger mt-3\">{{ errorMessage }}</div>\r\n      </div>\r\n      <div class=\"col-md-6\">\r\n        <h2>Lista de Veículos</h2>\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Placa</th>\r\n              <th>Modelo</th>\r\n              <th>Descrição</th>\r\n              <th>Cliente</th>\r\n              <th>Ações</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"vehicle in vehicles\" :key=\"vehicle.id\">\r\n              <td>{{ vehicle.plate }}</td>\r\n              <td>{{ vehicle.model }}</td>\r\n              <td>{{ vehicle.description }}</td>\r\n              <td>{{ vehicle.customer ? vehicle.customer.name : '-' }}</td>\r\n              <td>\r\n                <button class=\"btn btn-warning btn-sm mr-2\" @click=\"editVehicle(vehicle)\">\r\n                  Editar\r\n                </button>\r\n                <button class=\"btn btn-danger btn-sm\" @click=\"deleteVehicle(vehicle.id)\">\r\n                  Excluir\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      vehicles: [],\r\n      customers: [],\r\n      currentVehicle: {\r\n        id: null,\r\n        plate: '',\r\n        model: '',\r\n        description: '',\r\n        customer: '',\r\n      },\r\n      editingVehicle: false,\r\n      errorMessage: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchVehicles();\r\n    this.fetchCustomers();\r\n  },\r\n  methods: {\r\n    async fetchVehicles() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/v1/vehicles/');\r\n        this.vehicles = response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.errorMessage = 'Erro ao buscar veículos.';\r\n      }\r\n    },\r\n    async fetchCustomers() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/v1/customers/');\r\n        this.customers = response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.errorMessage = 'Erro ao buscar clientes.';\r\n      }\r\n    },\r\n    async saveVehicle() {\r\n      this.errorMessage = null;\r\n      try {\r\n        await axios.post('http://localhost:8000/api/v1/vehicles/', this.currentVehicle);\r\n        this.currentVehicle = {\r\n          id: null,\r\n          plate: '',\r\n          model: '',\r\n          description: '',\r\n          customer: '',\r\n        };\r\n        this.fetchVehicles();\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (error.response && error.response.data && error.response.data.error) {\r\n          this.errorMessage = error.response.data.error;\r\n        } else {\r\n          this.errorMessage = 'Erro ao cadastrar veículo.';\r\n        }\r\n      }\r\n    },\r\n    editVehicle(vehicle) {\r\n      this.editingVehicle = true;\r\n      this.currentVehicle = { ...vehicle };\r\n    },\r\n    async updateVehicle() {\r\n      this.errorMessage = null;\r\n      try {\r\n        await axios.put(\r\n          `http://localhost:8000/api/v1/vehicles/${this.currentVehicle.id}/`,\r\n          this.currentVehicle,\r\n        );\r\n        this.editingVehicle = false;\r\n        this.currentVehicle = {\r\n          id: null,\r\n          plate: '',\r\n          model: '',\r\n          description: '',\r\n          customer: '',\r\n        };\r\n        this.fetchVehicles();\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (error.response && error.response.data && error.response.data.error) {\r\n          this.errorMessage = error.response.data.error;\r\n        } else {\r\n          this.errorMessage = 'Erro ao atualizar veículo.';\r\n        }\r\n      }\r\n    },\r\n    async deleteVehicle(vehicleId) {\r\n      this.errorMessage = null;\r\n      try {\r\n        await axios.delete(`http://localhost:8000/api/v1/vehicles/${vehicleId}/`);\r\n        this.fetchVehicles();\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.errorMessage = 'Erro ao excluir veículo.';\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}