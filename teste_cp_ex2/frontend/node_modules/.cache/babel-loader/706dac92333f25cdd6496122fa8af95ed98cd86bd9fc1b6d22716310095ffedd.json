{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      contracts: [],\n      newContract: {\n        description: '',\n        max_value: 0,\n        rules: []\n      },\n      editContractData: {\n        id: null,\n        description: '',\n        max_value: 0,\n        rules: []\n      }\n    };\n  },\n  mounted() {\n    this.fetchContracts();\n  },\n  methods: {\n    async fetchContracts() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/v1/contracts/');\n        this.contracts = response.data;\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async createContract() {\n      try {\n        await axios.post('http://localhost:8000/api/v1/contracts/', this.newContract);\n        this.newContract = {\n          description: '',\n          max_value: 0,\n          rules: []\n        };\n        this.fetchContracts();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    editContract(contract) {\n      this.editContractData = Object.assign({}, contract);\n    },\n    async updateContract() {\n      try {\n        await axios.put(`http://localhost:8000/api/v1/contracts/${this.editContractData.id}/`, this.editContractData);\n        this.editContractData = {\n          id: null,\n          description: '',\n          max_value: 0,\n          rules: []\n        };\n        this.fetchContracts();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async deleteContract(contractId) {\n      try {\n        await axios.delete(`http://localhost:8000/api/v1/contracts/${contractId}/`);\n        this.fetchContracts();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    addRule() {\n      this.newContract.rules.push({\n        until: 0,\n        value: 0\n      });\n    },\n    removeRule(index) {\n      this.newContract.rules.splice(index, 1);\n    }\n  }\n};","map":{"version":3,"names":["axios","data","contracts","newContract","description","max_value","rules","editContractData","id","mounted","fetchContracts","methods","response","get","error","console","createContract","post","editContract","contract","Object","assign","updateContract","put","deleteContract","contractId","delete","addRule","push","until","value","removeRule","index","splice"],"sources":["C:\\Users\\Lucas\\Desktop\\teste_cp_ex2\\frontend\\src\\components\\Contract.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h1>Contratos</h1>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <h2>Criar Contrato</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"descriptionInput\">Descrição:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"descriptionInput\" v-model=\"newContract.description\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"maxValueInput\">Valor Máximo:</label>\r\n          <input type=\"number\" class=\"form-control\" id=\"maxValueInput\" v-model.number=\"newContract.max_value\">\r\n        </div>\r\n        <h3>Regras</h3>\r\n        <div v-for=\"(rule, index) in newContract.rules\" :key=\"index\">\r\n          <div class=\"form-group\">\r\n            <label :for=\"`untilInput${index}`\">Até (minutos):</label>\r\n            <input type=\"number\" class=\"form-control\" :id=\"`untilInput${index}`\" v-model.number=\"rule.until\">\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label :for=\"`valueInput${index}`\">Valor:</label>\r\n            <input type=\"number\" class=\"form-control\" :id=\"`valueInput${index}`\" v-model.number=\"rule.value\">\r\n          </div>\r\n          <button class=\"btn btn-danger btn-sm\" @click=\"removeRule(index)\">Remover Regra</button>\r\n        </div>\r\n        <button class=\"btn btn-secondary\" @click=\"addRule\">Adicionar Regra</button>\r\n        <button class=\"btn btn-primary\" @click=\"createContract\">Criar</button>\r\n      </div>\r\n      <div class=\"col-md-6\">\r\n        <h2>Lista de Contratos</h2>\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Descrição</th>\r\n              <th>Valor Máximo</th>\r\n              <th>Ações</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"contract in contracts\" :key=\"contract.id\">\r\n              <td>{{ contract.description }}</td>\r\n              <td>{{ contract.max_value }}</td>\r\n              <td>\r\n                <button class=\"btn btn-warning btn-sm\" @click=\"editContract(contract)\">Editar</button>\r\n                <button class=\"btn btn-danger btn-sm\" @click=\"deleteContract(contract.id)\">Excluir</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      contracts: [],\r\n      newContract: {\r\n        description: '',\r\n        max_value: 0,\r\n        rules: []\r\n      },\r\n      editContractData: {\r\n        id: null,\r\n        description: '',\r\n        max_value: 0,\r\n        rules: []\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchContracts()\r\n  },\r\n  methods: {\r\n    async fetchContracts() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/v1/contracts/')\r\n        this.contracts = response.data\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async createContract() {\r\n      try {\r\n        await axios.post('http://localhost:8000/api/v1/contracts/', this.newContract)\r\n        this.newContract = { description: '', max_value: 0, rules: [] }\r\n        this.fetchContracts()\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    editContract(contract) {\r\n      this.editContractData = Object.assign({}, contract)\r\n    },\r\n    async updateContract() {\r\n      try {\r\n        await axios.put(`http://localhost:8000/api/v1/contracts/${this.editContractData.id}/`, this.editContractData)\r\n        this.editContractData = { id: null, description: '', max_value: 0, rules: [] }\r\n        this.fetchContracts()\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async deleteContract(contractId) {\r\n      try {\r\n        await axios.delete(`http://localhost:8000/api/v1/contracts/${contractId}/`)\r\n        this.fetchContracts()\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    addRule() {\r\n      this.newContract.rules.push({ until: 0, value: 0 })\r\n    },\r\n    removeRule(index) {\r\n      this.newContract.rules.splice(index, 1)\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":";AAwDA,OAAOA,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,WAAW,EAAE;QACXC,WAAW,EAAE,EAAE;QACfC,SAAS,EAAE,CAAC;QACZC,KAAK,EAAE;MACT,CAAC;MACDC,gBAAgB,EAAE;QAChBC,EAAE,EAAE,IAAI;QACRJ,WAAW,EAAE,EAAE;QACfC,SAAS,EAAE,CAAC;QACZC,KAAK,EAAE;MACT;IACF;EACF,CAAC;EACDG,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,cAAc,CAAC;EACtB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,cAAcA,CAAA,EAAG;MACrB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMZ,KAAK,CAACa,GAAG,CAAC,yCAAyC;QAC1E,IAAI,CAACX,SAAQ,GAAIU,QAAQ,CAACX,IAAG;MAC/B,EAAE,OAAOa,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK;MACrB;IACF,CAAC;IACD,MAAME,cAAcA,CAAA,EAAG;MACrB,IAAI;QACF,MAAMhB,KAAK,CAACiB,IAAI,CAAC,yCAAyC,EAAE,IAAI,CAACd,WAAW;QAC5E,IAAI,CAACA,WAAU,GAAI;UAAEC,WAAW,EAAE,EAAE;UAAEC,SAAS,EAAE,CAAC;UAAEC,KAAK,EAAE;QAAG;QAC9D,IAAI,CAACI,cAAc,CAAC;MACtB,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK;MACrB;IACF,CAAC;IACDI,YAAYA,CAACC,QAAQ,EAAE;MACrB,IAAI,CAACZ,gBAAe,GAAIa,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEF,QAAQ;IACpD,CAAC;IACD,MAAMG,cAAcA,CAAA,EAAG;MACrB,IAAI;QACF,MAAMtB,KAAK,CAACuB,GAAG,CAAE,0CAAyC,IAAI,CAAChB,gBAAgB,CAACC,EAAG,GAAE,EAAE,IAAI,CAACD,gBAAgB;QAC5G,IAAI,CAACA,gBAAe,GAAI;UAAEC,EAAE,EAAE,IAAI;UAAEJ,WAAW,EAAE,EAAE;UAAEC,SAAS,EAAE,CAAC;UAAEC,KAAK,EAAE;QAAG;QAC7E,IAAI,CAACI,cAAc,CAAC;MACtB,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK;MACrB;IACF,CAAC;IACD,MAAMU,cAAcA,CAACC,UAAU,EAAE;MAC/B,IAAI;QACF,MAAMzB,KAAK,CAAC0B,MAAM,CAAE,0CAAyCD,UAAW,GAAE;QAC1E,IAAI,CAACf,cAAc,CAAC;MACtB,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK;MACrB;IACF,CAAC;IACDa,OAAOA,CAAA,EAAG;MACR,IAAI,CAACxB,WAAW,CAACG,KAAK,CAACsB,IAAI,CAAC;QAAEC,KAAK,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAE,CAAC;IACpD,CAAC;IACDC,UAAUA,CAACC,KAAK,EAAE;MAChB,IAAI,CAAC7B,WAAW,CAACG,KAAK,CAAC2B,MAAM,CAACD,KAAK,EAAE,CAAC;IACxC;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}