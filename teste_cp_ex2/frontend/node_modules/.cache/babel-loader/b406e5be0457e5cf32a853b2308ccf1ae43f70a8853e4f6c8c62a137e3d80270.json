{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      plate: '',\n      cardId: '',\n      parkMovements: []\n    };\n  },\n  mounted() {\n    this.fetchParkMovements();\n  },\n  methods: {\n    async fetchParkMovements() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/v1/parkmovements/');\n        this.parkMovements = response.data;\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async registerEntry() {\n      try {\n        const response = await axios.post('http://localhost:8000/api/v1/parkmovements/entry/', {\n          plate: this.plate,\n          card_id: this.cardId\n        });\n        this.plate = '';\n        this.cardId = '';\n        this.fetchParkMovements();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async registerExit(movementId) {\n      try {\n        await axios.patch(`http://localhost:8000/api/v1/parkmovements/${movementId}/exit/`);\n        this.fetchParkMovements();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","plate","cardId","parkMovements","mounted","fetchParkMovements","methods","response","get","error","console","registerEntry","post","card_id","registerExit","movementId","patch"],"sources":["C:\\Users\\Lucas\\Desktop\\teste_cp_ex2\\frontend\\src\\components\\Operation.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h1>Operação</h1>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <h2>Entrada de Veículo</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"plateInput\">Placa:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"plateInput\" v-model=\"plate\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"cardIdInput\">Cartão ID:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"cardIdInput\" v-model=\"cardId\">\r\n        </div>\r\n        <button class=\"btn btn-primary\" @click=\"registerEntry\">Registrar Entrada</button>\r\n      </div>\r\n      <div class=\"col-md-6\">\r\n        <h2>Veículos no Pátio</h2>\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Placa</th>\r\n              <th>Cartão ID</th>\r\n              <th>Entrada</th>\r\n              <th>Ações</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"movement in parkMovements\" :key=\"movement.id\">\r\n              <td>{{ movement.vehicle.plate }}</td>\r\n              <td>{{ movement.vehicle.customer ? movement.vehicle.customer.card_id : '' }}</td>\r\n              <td>{{ new Date(movement.entry_date).toLocaleString() }}</td>\r\n              <td>\r\n                <button class=\"btn btn-danger btn-sm\" @click=\"registerExit(movement.id)\" v-if=\"!movement.exit_date\">Registrar Saída</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      plate: '',\r\n      cardId: '',\r\n      parkMovements: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchParkMovements()\r\n  },\r\n  methods: {\r\n    async fetchParkMovements() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/v1/parkmovements/')\r\n        this.parkMovements = response.data\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async registerEntry() {\r\n      try {\r\n        const response = await axios.post('http://localhost:8000/api/v1/parkmovements/entry/', {\r\n          plate: this.plate,\r\n          card_id: this.cardId\r\n        })\r\n        this.plate = ''\r\n        this.cardId = ''\r\n        this.fetchParkMovements()\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async registerExit(movementId) {\r\n      try {\r\n        await axios.patch(`http://localhost:8000/api/v1/parkmovements/${movementId}/exit/`)\r\n        this.fetchParkMovements()\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":"AA4CA,OAAOA,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVC,aAAa,EAAE;IACjB;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,kBAAkB,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,kBAAkBA,CAAA,EAAG;MACzB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMR,KAAK,CAACS,GAAG,CAAC,6CAA6C;QAC9E,IAAI,CAACL,aAAY,GAAII,QAAQ,CAACP,IAAG;MACnC,EAAE,OAAOS,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK;MACrB;IACF,CAAC;IACD,MAAME,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMJ,QAAO,GAAI,MAAMR,KAAK,CAACa,IAAI,CAAC,mDAAmD,EAAE;UACrFX,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBY,OAAO,EAAE,IAAI,CAACX;QAChB,CAAC;QACD,IAAI,CAACD,KAAI,GAAI,EAAC;QACd,IAAI,CAACC,MAAK,GAAI,EAAC;QACf,IAAI,CAACG,kBAAkB,CAAC;MAC1B,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK;MACrB;IACF,CAAC;IACD,MAAMK,YAAYA,CAACC,UAAU,EAAE;MAC7B,IAAI;QACF,MAAMhB,KAAK,CAACiB,KAAK,CAAE,8CAA6CD,UAAW,QAAO;QAClF,IAAI,CAACV,kBAAkB,CAAC;MAC1B,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}