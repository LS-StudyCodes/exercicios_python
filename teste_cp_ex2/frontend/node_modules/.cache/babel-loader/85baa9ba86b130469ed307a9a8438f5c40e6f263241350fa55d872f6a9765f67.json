{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Veículos\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-6\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Cadastrar/Editar Veículo\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"plateInput\"\n}, \"Placa:\", -1 /* HOISTED */);\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"modelInput\"\n}, \"Modelo:\", -1 /* HOISTED */);\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"descriptionInput\"\n}, \"Descrição:\", -1 /* HOISTED */);\nconst _hoisted_12 = {\n  class: \"form-group\"\n};\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"customerIdSelect\"\n}, \"Cliente:\", -1 /* HOISTED */);\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"Selecione um cliente\", -1 /* HOISTED */);\nconst _hoisted_15 = [\"value\"];\nconst _hoisted_16 = {\n  key: 2,\n  class: \"alert alert-danger mt-3\"\n};\nconst _hoisted_17 = {\n  class: \"col-md-6\"\n};\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Lista de Veículos\", -1 /* HOISTED */);\nconst _hoisted_19 = {\n  class: \"table\"\n};\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Placa\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Modelo\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Descrição\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Cliente\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Ações\")])], -1 /* HOISTED */);\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"plateInput\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.currentVehicle.plate = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.currentVehicle.plate]])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"modelInput\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.currentVehicle.model = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.currentVehicle.model]])]), _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"descriptionInput\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.currentVehicle.description = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.currentVehicle.description]])]), _createElementVNode(\"div\", _hoisted_12, [_hoisted_13, _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    id: \"customerIdSelect\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.currentVehicle.customer = $event)\n  }, [_hoisted_14, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.customers, customer => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: customer.id,\n      value: customer.id\n    }, _toDisplayString(customer.name), 9 /* TEXT, PROPS */, _hoisted_15);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.currentVehicle.customer]])]), !$data.editingVehicle ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"btn btn-primary\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.saveVehicle && $options.saveVehicle(...args))\n  }, \" Cadastrar \")) : (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"btn btn-success\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.updateVehicle && $options.updateVehicle(...args))\n  }, \" Salvar Alterações \")), $data.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_17, [_hoisted_18, _createElementVNode(\"table\", _hoisted_19, [_hoisted_20, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.vehicles, vehicle => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: vehicle.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(vehicle.plate), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(vehicle.model), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(vehicle.description), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(vehicle.customer ? vehicle.customer.name : '-'), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-warning btn-sm mr-2\",\n      onClick: $event => $options.editVehicle(vehicle)\n    }, \" Editar \", 8 /* PROPS */, _hoisted_21), _createElementVNode(\"button\", {\n      class: \"btn btn-danger btn-sm\",\n      onClick: $event => $options.deleteVehicle(vehicle.id)\n    }, \" Excluir \", 8 /* PROPS */, _hoisted_22)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","value","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","type","id","_cache","$event","$data","currentVehicle","plate","_hoisted_8","_hoisted_9","model","_hoisted_10","_hoisted_11","description","_hoisted_12","_hoisted_13","customer","_hoisted_14","_Fragment","_renderList","customers","name","_hoisted_15","editingVehicle","onClick","args","$options","saveVehicle","updateVehicle","errorMessage","_hoisted_16","_toDisplayString","_createCommentVNode","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","vehicles","vehicle","editVehicle","_hoisted_21","deleteVehicle","_hoisted_22"],"sources":["C:\\Users\\Lucas\\Desktop\\teste_cp_ex2\\frontend\\src\\components\\Vehicle.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h1>Veículos</h1>\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <h2>Cadastrar/Editar Veículo</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"plateInput\">Placa:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"plateInput\" v-model=\"currentVehicle.plate\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"modelInput\">Modelo:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"modelInput\" v-model=\"currentVehicle.model\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"descriptionInput\">Descrição:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"descriptionInput\" v-model=\"currentVehicle.description\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"customerIdSelect\">Cliente:</label>\r\n          <select class=\"form-control\" id=\"customerIdSelect\" v-model=\"currentVehicle.customer\">\r\n            <option value=\"\">Selecione um cliente</option>\r\n            <option v-for=\"customer in customers\" :key=\"customer.id\" :value=\"customer.id\">\r\n              {{ customer.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <button class=\"btn btn-primary\" @click=\"saveVehicle\" v-if=\"!editingVehicle\">\r\n          Cadastrar\r\n        </button>\r\n        <button class=\"btn btn-success\" @click=\"updateVehicle\" v-else>\r\n          Salvar Alterações\r\n        </button>\r\n        <div v-if=\"errorMessage\" class=\"alert alert-danger mt-3\">{{ errorMessage }}</div>\r\n      </div>\r\n      <div class=\"col-md-6\">\r\n        <h2>Lista de Veículos</h2>\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Placa</th>\r\n              <th>Modelo</th>\r\n              <th>Descrição</th>\r\n              <th>Cliente</th>\r\n              <th>Ações</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"vehicle in vehicles\" :key=\"vehicle.id\">\r\n              <td>{{ vehicle.plate }}</td>\r\n              <td>{{ vehicle.model }}</td>\r\n              <td>{{ vehicle.description }}</td>\r\n              <td>{{ vehicle.customer ? vehicle.customer.name : '-' }}</td>\r\n              <td>\r\n                <button class=\"btn btn-warning btn-sm mr-2\" @click=\"editVehicle(vehicle)\">\r\n                  Editar\r\n                </button>\r\n                <button class=\"btn btn-danger btn-sm\" @click=\"deleteVehicle(vehicle.id)\">\r\n                  Excluir\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      vehicles: [],\r\n      customers: [],\r\n      currentVehicle: {\r\n        id: null,\r\n        plate: '',\r\n        model: '',\r\n        description: '',\r\n        customer: '',\r\n      },\r\n      editingVehicle: false,\r\n      errorMessage: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchVehicles();\r\n    this.fetchCustomers();\r\n  },\r\n  methods: {\r\n    async fetchVehicles() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/v1/vehicles/');\r\n        this.vehicles = response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.errorMessage = 'Erro ao buscar veículos.';\r\n      }\r\n    },\r\n    async fetchCustomers() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/v1/customers/');\r\n        this.customers = response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.errorMessage = 'Erro ao buscar clientes.';\r\n      }\r\n    },\r\n    async saveVehicle() {\r\n      this.errorMessage = null;\r\n      try {\r\n        await axios.post('http://localhost:8000/api/v1/vehicles/', this.currentVehicle);\r\n        this.currentVehicle = {\r\n          id: null,\r\n          plate: '',\r\n          model: '',\r\n          description: '',\r\n          customer: '',\r\n        };\r\n        this.fetchVehicles();\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (error.response && error.response.data && error.response.data.error) {\r\n          this.errorMessage = error.response.data.error;\r\n        } else {\r\n          this.errorMessage = 'Erro ao cadastrar veículo.';\r\n        }\r\n      }\r\n    },\r\n    editVehicle(vehicle) {\r\n      this.editingVehicle = true;\r\n      this.currentVehicle = { ...vehicle };\r\n    },\r\n    async updateVehicle() {\r\n      this.errorMessage = null;\r\n      try {\r\n        await axios.put(\r\n          `http://localhost:8000/api/v1/vehicles/${this.currentVehicle.id}/`,\r\n          this.currentVehicle,\r\n        );\r\n        this.editingVehicle = false;\r\n        this.currentVehicle = {\r\n          id: null,\r\n          plate: '',\r\n          model: '',\r\n          description: '',\r\n          customer: '',\r\n        };\r\n        this.fetchVehicles();\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (error.response && error.response.data && error.response.data.error) {\r\n          this.errorMessage = error.response.data.error;\r\n        } else {\r\n          this.errorMessage = 'Erro ao atualizar veículo.';\r\n        }\r\n      }\r\n    },\r\n    async deleteVehicle(vehicleId) {\r\n      this.errorMessage = null;\r\n      try {\r\n        await axios.delete(`http://localhost:8000/api/v1/vehicles/${vehicleId}/`);\r\n        this.fetchVehicles();\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.errorMessage = 'Erro ao excluir veículo.';\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}